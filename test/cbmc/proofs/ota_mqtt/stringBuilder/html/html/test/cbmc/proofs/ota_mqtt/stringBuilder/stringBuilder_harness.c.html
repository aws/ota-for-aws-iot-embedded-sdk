
<html>
<head>
<title>test/cbmc/proofs/ota_mqtt/stringBuilder/stringBuilder_harness.c</title>
<link rel="stylesheet" type="text/css" href="../../../../../viewer.css">
</head>

<body>
<div class="code">
<div id="1" class="line none">    1 /* Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. */</div><div id="2" class="line none">    2 /* SPDX-License-Identifier: Apache-2.0 */</div><div id="3" class="line none">    3 </div><div id="4" class="line none">    4 /*</div><div id="5" class="line none">    5  * Insert copyright notice</div><div id="6" class="line none">    6  */</div><div id="7" class="line none">    7 </div><div id="8" class="line none">    8 /**</div><div id="9" class="line none">    9  * @file stringBuilder_harness.c</div><div id="10" class="line none">   10  * @brief Implements the proof harness for stringBuilder function.</div><div id="11" class="line none">   11  */</div><div id="12" class="line none">   12 </div><div id="13" class="line none">   13 /*</div><div id="14" class="line none">   14  * Insert project header files that</div><div id="15" class="line none">   15  *   - include the declaration of the function</div><div id="16" class="line none">   16  *   - include the types needed to declare function arguments</div><div id="17" class="line none">   17  */</div><div id="18" class="line none">   18 </div><div id="19" class="line none">   19 /* This include file is required for string functions. */</div><div id="20" class="line none">   20 #include &lt;string.h&gt;</div><div id="21" class="line none">   21 </div><div id="22" class="line none">   22 size_t <a href="../../../../../source/ota_mqtt.c.html#256">__CPROVER_file_local_ota_mqtt_c_stringBuilder</a>( char * pBuffer,</div><div id="23" class="line none">   23                              size_t bufferSizeBytes,</div><div id="24" class="line none">   24                              const char * strings[] );</div><div id="25" class="line none">   25 </div><div id="26" class="line none">   26 void <a href="stringBuilder_harness.c.html#26">stringBuilder_harness</a>()</div><div id="27" class="line none">   27 {</div><div id="28" class="line none">   28     /* Insert argument declarations */</div><div id="29" class="line hit">   29     char * pBuffer;</div><div id="30" class="line hit">   30     size_t bufferSizeBytes;</div><div id="31" class="line hit">   31     char ** strings;</div><div id="32" class="line none">   32 </div><div id="33" class="line hit">   33     size_t numStrings;</div><div id="34" class="line hit">   34     size_t stringSize;</div><div id="35" class="line hit">   35     size_t i;</div><div id="36" class="line none">   36 </div><div id="37" class="line none">   37     /* The size of the pBuffer is always equal to the bufferSizeBytes. */</div><div id="38" class="line hit">   38     pBuffer = ( char * ) <a href="stringBuilder_harness.c.html#38">malloc</a>( bufferSizeBytes );</div><div id="39" class="line none">   39 </div><div id="40" class="line none">   40     /* pBuffer can never be NULL since it it always initialized by a null character. */</div><div id="41" class="line hit">   41     __CPROVER_assume(pBuffer != NULL);</div><div id="42" class="line none">   42     </div><div id="43" class="line none">   43     /* The maximum number of strings inside the numStrings is 11. */</div><div id="44" class="line hit">   44     __CPROVER_assume( numStrings &gt; 0 &amp;&amp; numStrings &lt; 13 );</div><div id="45" class="line none">   45 </div><div id="46" class="line none">   46     /* Initializing an array of strings. */</div><div id="47" class="line hit">   47     strings = ( char ** ) <a href="stringBuilder_harness.c.html#38">malloc</a>( numStrings * sizeof( char * ) );</div><div id="48" class="line none">   48 </div><div id="49" class="line none">   49     /* The strings array cannot be NULL as it is always initialized before</div><div id="50" class="line none">   50      *  passing to the function. */</div><div id="51" class="line hit">   51     __CPROVER_assume( strings != NULL );</div><div id="52" class="line none">   52 </div><div id="53" class="line none">   53     /* Assuming that the size of the strings can never be NULL. */</div><div id="54" class="line hit">   54     __CPROVER_assume( stringSize &gt; 0 &amp;&amp; stringSize &lt; 1500 );</div><div id="55" class="line none">   55 </div><div id="56" class="line hit">   56     for( i = 0; i &lt; numStrings; ++i )</div><div id="57" class="line none">   57     {</div><div id="58" class="line hit">   58         strings[ i ] = ( char * ) <a href="stringBuilder_harness.c.html#38">malloc</a>( stringSize );</div><div id="59" class="line hit">   59     }</div><div id="60" class="line none">   60 </div><div id="61" class="line none">   61     /* Strings array is always passed with a NULL string at the end. */</div><div id="62" class="line hit">   62     __CPROVER_assume( strings[ numStrings - 1 ] == NULL );</div><div id="63" class="line none">   63 </div><div id="64" class="line hit">   64     <a href="../../../../../source/ota_mqtt.c.html#256">__CPROVER_file_local_ota_mqtt_c_stringBuilder</a>( pBuffer, bufferSizeBytes, strings );</div><div id="65" class="line none">   65 </div><div id="66" class="line none">   66     /* Free the allocated memory. */</div><div id="67" class="line hit">   67     <a href="stringBuilder_harness.c.html#67">free</a>( pBuffer );</div><div id="68" class="line none">   68 </div><div id="69" class="line hit">   69     for( i = 0; i &lt; numStrings; ++i )</div><div id="70" class="line none">   70     {</div><div id="71" class="line hit">   71         <a href="stringBuilder_harness.c.html#67">free</a>( strings[ i ] );</div><div id="72" class="line none">   72     }</div><div id="73" class="line hit">   73     <a href="stringBuilder_harness.c.html#67">free</a>( strings );</div><div id="74" class="line hit">   74 }</div>
</div>
</body>
</html>
