<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS IoT Over-the-air Update: ota_platform_interface.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS IoT Over-the-air Update<span id="projectnumber">&#160;v3.3.0</span>
   </div>
   <div id="projectbrief">Client library for AWS IoT OTA</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('ota__platform__interface_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">ota_platform_interface.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Contains PAL interface statuses, type definitions and structure to store interface routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ota__private_8h_source.html">ota_private.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ota_platform_interface.h:</div>
<div class="dyncontent">
<div class="center"><img src="ota__platform__interface_8h__incl.png" border="0" usemap="#aota__platform__interface_8h" alt=""/></div>
<map name="aota__platform__interface_8h" id="aota__platform__interface_8h">
<area shape="rect" title="Contains PAL interface statuses, type definitions and structure to store interface routines." alt="" coords="142,5,325,32"/>
<area shape="rect" href="ota__private_8h.html" title="Macros, enums, variables, and definitions internal to the OTA Agent module and shared by other OTA mo..." alt="" coords="179,80,287,107"/>
<area shape="rect" title=" " alt="" coords="5,155,72,181"/>
<area shape="rect" title=" " alt="" coords="97,155,167,181"/>
<area shape="rect" title=" " alt="" coords="192,155,275,181"/>
<area shape="rect" title=" " alt="" coords="299,155,400,181"/>
<area shape="rect" href="ota__config__defaults_8h.html" title="This represents the default values for the configuration macros for the OTA library." alt="" coords="425,155,586,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ota__platform__interface_8h__dep__incl.png" border="0" usemap="#aota__platform__interface_8hdep" alt=""/></div>
<map name="aota__platform__interface_8hdep" id="aota__platform__interface_8hdep">
<area shape="rect" title="Contains PAL interface statuses, type definitions and structure to store interface routines." alt="" coords="40,5,223,32"/>
<area shape="rect" href="ota_8c.html" title="Implementation of the AWS IoT Over&#45;The&#45;Air Updates Client Library." alt="" coords="5,229,60,256"/>
<area shape="rect" href="ota_8h.html" title="OTA Agent Interface." alt="" coords="253,80,308,107"/>
<area shape="rect" href="ota__http_8c.html" title="Data transfer over HTTP routines." alt="" coords="317,229,404,256"/>
<area shape="rect" href="ota__http__private_8h.html" title="Contains definitions of routines for OTA download using HTTP data plane." alt="" coords="318,155,459,181"/>
<area shape="rect" href="ota__interface__private_8h.html" title="Contains function definitions and structures for data and control interfaces." alt="" coords="70,155,243,181"/>
<area shape="rect" href="ota__mqtt_8c.html" title="Routines for supporting over the air updates using MQTT." alt="" coords="477,229,569,256"/>
<area shape="rect" href="ota__mqtt__private_8h.html" title="Contains function definitions of routines for OTA download and control using MQTT data plane." alt="" coords="534,155,681,181"/>
<area shape="rect" href="ota__interface_8c.html" title="Internal interface for setting the data and control planes." alt="" coords="97,229,216,256"/>
</map>
</div>
</div>
<p><a href="ota__platform__interface_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_ota_pal_interface__t.html">OtaPalInterface_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">OTA pal Interface structure.  <a href="struct_ota_pal_interface__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af86d69b12a8373d4843e693187c66c02"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#af86d69b12a8373d4843e693187c66c02">OTA_PAL_ERR_MASK</a>&#160;&#160;&#160;0xffffffUL</td></tr>
<tr class="separator:af86d69b12a8373d4843e693187c66c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adca6a50131b3abc3d910f4c7f39ce332"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#adca6a50131b3abc3d910f4c7f39ce332">OTA_PAL_SUB_BITS</a>&#160;&#160;&#160;24U</td></tr>
<tr class="separator:adca6a50131b3abc3d910f4c7f39ce332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25e30871d1c2fc609552591d883c87e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#ab25e30871d1c2fc609552591d883c87e">OTA_PAL_MAIN_ERR</a>(err)&#160;&#160;&#160;( ( <a class="el" href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">OtaPalMainStatus_t</a> ) ( uint32_t ) ( ( uint32_t ) ( err ) &gt;&gt; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#adca6a50131b3abc3d910f4c7f39ce332">OTA_PAL_SUB_BITS</a> ) )</td></tr>
<tr class="separator:ab25e30871d1c2fc609552591d883c87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e53a52e858cad1adc7231d8d6ff769"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#a93e53a52e858cad1adc7231d8d6ff769">OTA_PAL_SUB_ERR</a>(err)&#160;&#160;&#160;( ( uint32_t ) ( err ) &amp; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#af86d69b12a8373d4843e693187c66c02">OTA_PAL_ERR_MASK</a> )</td></tr>
<tr class="separator:a93e53a52e858cad1adc7231d8d6ff769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0684a42fae0de7395399d8b4d248fb35"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#a0684a42fae0de7395399d8b4d248fb35">OTA_PAL_COMBINE_ERR</a>(main,  sub)&#160;&#160;&#160;( ( ( uint32_t ) ( main ) &lt;&lt; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#adca6a50131b3abc3d910f4c7f39ce332">OTA_PAL_SUB_BITS</a> ) | ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#a93e53a52e858cad1adc7231d8d6ff769">OTA_PAL_SUB_ERR</a>( sub ) )</td></tr>
<tr class="separator:a0684a42fae0de7395399d8b4d248fb35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a503f74c089364b482321578b541d7640"><td class="memItemLeft" align="right" valign="top"><a id="a503f74c089364b482321578b541d7640" name="a503f74c089364b482321578b541d7640"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>OtaPalStatus_t</b></td></tr>
<tr class="memdesc:a503f74c089364b482321578b541d7640"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA platform interface return status. Composed of main and sub status. <br /></td></tr>
<tr class="separator:a503f74c089364b482321578b541d7640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4910712f01795de72f368d4614dd8561"><td class="memItemLeft" align="right" valign="top"><a id="a4910712f01795de72f368d4614dd8561" name="a4910712f01795de72f368d4614dd8561"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>OtaPalSubStatus_t</b></td></tr>
<tr class="memdesc:a4910712f01795de72f368d4614dd8561"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA platform interface sub status. <br /></td></tr>
<tr class="separator:a4910712f01795de72f368d4614dd8561"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae085ba60212a4e05007c8b7fd1a77d7b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#ae085ba60212a4e05007c8b7fd1a77d7b">OtaPalAbort_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:ae085ba60212a4e05007c8b7fd1a77d7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort an OTA transfer.  <a href="ota__platform__interface_8h.html#ae085ba60212a4e05007c8b7fd1a77d7b">More...</a><br /></td></tr>
<tr class="separator:ae085ba60212a4e05007c8b7fd1a77d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5808e620bd4831bc60017b292dc92d05"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#a5808e620bd4831bc60017b292dc92d05">OtaPalCreateFileForRx_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:a5808e620bd4831bc60017b292dc92d05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new receive file for the data chunks as they come in.  <a href="ota__platform__interface_8h.html#a5808e620bd4831bc60017b292dc92d05">More...</a><br /></td></tr>
<tr class="separator:a5808e620bd4831bc60017b292dc92d05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c58c7400f40c25e8d72db755812c09"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#a70c58c7400f40c25e8d72db755812c09">OtaPalCloseFile_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:a70c58c7400f40c25e8d72db755812c09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authenticate and close the underlying receive file in the specified OTA context.  <a href="ota__platform__interface_8h.html#a70c58c7400f40c25e8d72db755812c09">More...</a><br /></td></tr>
<tr class="separator:a70c58c7400f40c25e8d72db755812c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8a2d3cb673db72796879ab086efafa"><td class="memItemLeft" align="right" valign="top">typedef int16_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#aef8a2d3cb673db72796879ab086efafa">OtaPalWriteBlock_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext, uint32_t offset, uint8_t *const pData, uint32_t blockSize)</td></tr>
<tr class="memdesc:aef8a2d3cb673db72796879ab086efafa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a block of data to the specified file at the given offset.  <a href="ota__platform__interface_8h.html#aef8a2d3cb673db72796879ab086efafa">More...</a><br /></td></tr>
<tr class="separator:aef8a2d3cb673db72796879ab086efafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf803b6b5ad14fbe337cc1d487eb2a71"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#adf803b6b5ad14fbe337cc1d487eb2a71">OtaPalActivateNewImage_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:adf803b6b5ad14fbe337cc1d487eb2a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate the newest MCU image received via OTA.  <a href="ota__platform__interface_8h.html#adf803b6b5ad14fbe337cc1d487eb2a71">More...</a><br /></td></tr>
<tr class="separator:adf803b6b5ad14fbe337cc1d487eb2a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc696708be31635b81619670941c198"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#addc696708be31635b81619670941c198">OtaPalResetDevice_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:addc696708be31635b81619670941c198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the device.  <a href="ota__platform__interface_8h.html#addc696708be31635b81619670941c198">More...</a><br /></td></tr>
<tr class="separator:addc696708be31635b81619670941c198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae426feb6f31e90928eaf79cc1daea813"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#ae426feb6f31e90928eaf79cc1daea813">OtaPalSetPlatformImageState_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext, <a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a> eState)</td></tr>
<tr class="memdesc:ae426feb6f31e90928eaf79cc1daea813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to set the state of the OTA update image.  <a href="ota__platform__interface_8h.html#ae426feb6f31e90928eaf79cc1daea813">More...</a><br /></td></tr>
<tr class="separator:ae426feb6f31e90928eaf79cc1daea813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829011b74971ee47c38c5eabde519d84"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__ota__enum__types.html#gab1f386c3bcc707ff32033659a0a4ddca">OtaPalImageState_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ota__platform__interface_8h.html#a829011b74971ee47c38c5eabde519d84">OtaPalGetPlatformImageState_t</a>) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td></tr>
<tr class="memdesc:a829011b74971ee47c38c5eabde519d84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the state of the OTA update image.  <a href="ota__platform__interface_8h.html#a829011b74971ee47c38c5eabde519d84">More...</a><br /></td></tr>
<tr class="separator:a829011b74971ee47c38c5eabde519d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga8e503bbbffc277f6fd5b8645767a685b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">OtaPalMainStatus_t</a> { <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba8dbb21a8a52503c7e8f33835dc6687c4">OtaPalSuccess</a> = 0
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba386aef27e1d9c7a937d3698e559641e4">OtaPalUninitialized</a> = 0xe0
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba0ec8f96ac056d352c45db250b4f6e05d">OtaPalOutOfMemory</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba088a029115f9b8053b9c23eb50438a1c">OtaPalNullFileContext</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba3a92c1315048b471740472eaa91cd39b">OtaPalSignatureCheckFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba15af1448f649ae32235d23aaab93b90d">OtaPalRxFileCreateFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685baf945ac941bd969b1833f80847d286805">OtaPalRxFileTooLarge</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba38e979079368805430af70c0daa35005">OtaPalBootInfoCreateFailed</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba7335f166465b3c6537093140445fdfef">OtaPalBadSignerCert</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba8022263fa243f4fedb05692f5816b709">OtaPalBadImageState</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685baf4431964d1c516dde35c2b37c829b195">OtaPalAbortFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba0beb58eb2e069e80e51e3c4857549d14">OtaPalRejectFailed</a>
, <br />
&#160;&#160;<a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685baf5d88629edcda34a8883985972e52126">OtaPalCommitFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba6e8ffdf4071a5ef58fdd3e3bdc1253de">OtaPalActivateFailed</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685ba233a2055c5de2e07759f3e39fa88f8cb">OtaPalFileAbort</a>
, <a class="el" href="group__ota__enum__types.html#gga8e503bbbffc277f6fd5b8645767a685bab9b6262d3d153e77d186f6df07eb3e6f">OtaPalFileClose</a>
<br />
 }</td></tr>
<tr class="memdesc:ga8e503bbbffc277f6fd5b8645767a685b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OTA platform interface main status.  <a href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">More...</a><br /></td></tr>
<tr class="separator:ga8e503bbbffc277f6fd5b8645767a685b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Contains PAL interface statuses, type definitions and structure to store interface routines. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af86d69b12a8373d4843e693187c66c02" name="af86d69b12a8373d4843e693187c66c02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86d69b12a8373d4843e693187c66c02">&#9670;&nbsp;</a></span>OTA_PAL_ERR_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_PAL_ERR_MASK&#160;&#160;&#160;0xffffffUL</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The PAL layer uses the signed low 24 bits of the OTA error code. </p>

</div>
</div>
<a id="adca6a50131b3abc3d910f4c7f39ce332" name="adca6a50131b3abc3d910f4c7f39ce332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adca6a50131b3abc3d910f4c7f39ce332">&#9670;&nbsp;</a></span>OTA_PAL_SUB_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_PAL_SUB_BITS&#160;&#160;&#160;24U</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The OTA Agent error code is the highest 8 bits of the word. </p>

</div>
</div>
<a id="ab25e30871d1c2fc609552591d883c87e" name="ab25e30871d1c2fc609552591d883c87e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab25e30871d1c2fc609552591d883c87e">&#9670;&nbsp;</a></span>OTA_PAL_MAIN_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_PAL_MAIN_ERR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">err</td><td>)</td>
          <td>&#160;&#160;&#160;( ( <a class="el" href="group__ota__enum__types.html#ga8e503bbbffc277f6fd5b8645767a685b">OtaPalMainStatus_t</a> ) ( uint32_t ) ( ( uint32_t ) ( err ) &gt;&gt; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#adca6a50131b3abc3d910f4c7f39ce332">OTA_PAL_SUB_BITS</a> ) )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Helper to get the OTA PAL main error code. </p>

</div>
</div>
<a id="a93e53a52e858cad1adc7231d8d6ff769" name="a93e53a52e858cad1adc7231d8d6ff769"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e53a52e858cad1adc7231d8d6ff769">&#9670;&nbsp;</a></span>OTA_PAL_SUB_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_PAL_SUB_ERR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">err</td><td>)</td>
          <td>&#160;&#160;&#160;( ( uint32_t ) ( err ) &amp; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#af86d69b12a8373d4843e693187c66c02">OTA_PAL_ERR_MASK</a> )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Helper to get the OTA PAL sub error code. </p>

</div>
</div>
<a id="a0684a42fae0de7395399d8b4d248fb35" name="a0684a42fae0de7395399d8b4d248fb35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0684a42fae0de7395399d8b4d248fb35">&#9670;&nbsp;</a></span>OTA_PAL_COMBINE_ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OTA_PAL_COMBINE_ERR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">main, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sub&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;( ( ( uint32_t ) ( main ) &lt;&lt; ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#adca6a50131b3abc3d910f4c7f39ce332">OTA_PAL_SUB_BITS</a> ) | ( uint32_t ) <a class="el" href="ota__platform__interface_8h.html#a93e53a52e858cad1adc7231d8d6ff769">OTA_PAL_SUB_ERR</a>( sub ) )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Helper to combine the OTA PAL main and sub error code. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae085ba60212a4e05007c8b7fd1a77d7b" name="ae085ba60212a4e05007c8b7fd1a77d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae085ba60212a4e05007c8b7fd1a77d7b">&#9670;&nbsp;</a></span>OtaPalAbort_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalAbort_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort an OTA transfer. </p>
<p >Aborts access to an existing open file represented by the OTA file context pFileContext. This is only valid for jobs that started successfully.</p>
<dl class="section note"><dt>Note</dt><dd>The input <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a> pFileContext is checked for NULL by the OTA agent before this function is called. This function may be called before the file is opened, so the file pointer pFileContext-&gt;fileHandle may be NULL when this function is called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>OTA file context information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The OTA PAL layer error code combined with the MCU specific error code. See OTA Agent error codes information in <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a>.</dd></dl>
<p>The file pointer will be set to NULL after this function returns. OtaPalSuccess is returned when aborting access to the open file was successful. OtaPalFileAbort is returned when aborting access to the open file context was unsuccessful. </p>

</div>
</div>
<a id="a5808e620bd4831bc60017b292dc92d05" name="a5808e620bd4831bc60017b292dc92d05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5808e620bd4831bc60017b292dc92d05">&#9670;&nbsp;</a></span>OtaPalCreateFileForRx_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalCreateFileForRx_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new receive file for the data chunks as they come in. </p>
<dl class="section note"><dt>Note</dt><dd>Opens the file indicated in the OTA file context in the MCU file system.</dd>
<dd>
The previous image may be present in the designated image download partition or file, so the partition or file must be completely erased or overwritten in this routine.</dd>
<dd>
The input <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a> pFileContext is checked for NULL by the OTA agent before this function is called. The device file path is a required field in the OTA job document, so pFileContext-&gt;pFilePath is checked for NULL by the OTA agent before this function is called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>OTA file context information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The OTA PAL layer error code combined with the MCU specific error code. See OTA Agent error codes information in <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a>.</dd></dl>
<p>OtaPalSuccess is returned when file creation is successful. OtaPalRxFileTooLarge is returned if the file to be created exceeds the device's non-volatile memory size constraints. OtaPalBootInfoCreateFailed is returned if the bootloader information file creation fails. OtaPalRxFileCreateFailed is returned for other errors creating the file in the device's non-volatile memory. </p>

</div>
</div>
<a id="a70c58c7400f40c25e8d72db755812c09" name="a70c58c7400f40c25e8d72db755812c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70c58c7400f40c25e8d72db755812c09">&#9670;&nbsp;</a></span>OtaPalCloseFile_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalCloseFile_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authenticate and close the underlying receive file in the specified OTA context. </p>
<dl class="section note"><dt>Note</dt><dd>The input <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a> pFileContext is checked for NULL by the OTA agent before this function is called. This function is called only at the end of block ingestion. prvPAL_CreateFileForRx() must succeed before this function is reached, so pFileContext-&gt;fileHandle(or pFileContext-&gt;pFile) is never NULL. The certificate path on the device is a required job document field in the OTA Agent, so pFileContext-&gt;pCertFilepath is never NULL. The file signature key is required job document field in the OTA Agent, so pFileContext-&gt;pSignature will never be NULL.</dd></dl>
<p>If the signature verification fails, file close should still be attempted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>OTA file context information.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The OTA PAL layer error code combined with the MCU specific error code. See OTA Agent error codes information in <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a>.</dd></dl>
<p>OtaPalSuccess is returned on success. OtaPalSignatureCheckFailed is returned when cryptographic signature verification fails. OtaPalBadSignerCert is returned for errors in the certificate itself. OtaPalFileClose is returned when closing the file fails. </p>

</div>
</div>
<a id="aef8a2d3cb673db72796879ab086efafa" name="aef8a2d3cb673db72796879ab086efafa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef8a2d3cb673db72796879ab086efafa">&#9670;&nbsp;</a></span>OtaPalWriteBlock_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int16_t(* OtaPalWriteBlock_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext, uint32_t offset, uint8_t *const pData, uint32_t blockSize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a block of data to the specified file at the given offset. </p>
<dl class="section note"><dt>Note</dt><dd>The input <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a> pFileContext is checked for NULL by the OTA agent before this function is called. The file pointer/handle pFileContext-&gt;pFile, is checked for NULL by the OTA agent before this function is called. pData is checked for NULL by the OTA agent before this function is called. blockSize is validated for range by the OTA agent before this function is called. offset is validated by the OTA agent before this function is called.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>OTA file context information. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Byte offset to write to from the beginning of the file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pData</td><td>Pointer to the byte array of data to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">blockSize</td><td>The number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written on a success, or a negative error code from the platform abstraction layer. </dd></dl>

</div>
</div>
<a id="adf803b6b5ad14fbe337cc1d487eb2a71" name="adf803b6b5ad14fbe337cc1d487eb2a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf803b6b5ad14fbe337cc1d487eb2a71">&#9670;&nbsp;</a></span>OtaPalActivateNewImage_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalActivateNewImage_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activate the newest MCU image received via OTA. </p>
<p >This function shall do whatever is necessary to activate the newest MCU firmware received via OTA. It is typically just a reset of the device.</p>
<dl class="section note"><dt>Note</dt><dd>This function SHOULD not return. If it does, the platform does not support an automatic reset or an error occurred.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The OTA PAL layer error code combined with the MCU specific error code. See OTA Agent error codes information in <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a>. </dd></dl>

</div>
</div>
<a id="addc696708be31635b81619670941c198" name="addc696708be31635b81619670941c198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc696708be31635b81619670941c198">&#9670;&nbsp;</a></span>OtaPalResetDevice_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalResetDevice_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the device. </p>
<p >This function shall reset the MCU and cause a reboot of the system.</p>
<dl class="section note"><dt>Note</dt><dd>This function SHOULD not return. If it does, the platform does not support an automatic reset or an error occurred.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The OTA PAL layer error code combined with the MCU specific error code. See OTA Agent error codes information in <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a>. </dd></dl>

</div>
</div>
<a id="ae426feb6f31e90928eaf79cc1daea813" name="ae426feb6f31e90928eaf79cc1daea813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae426feb6f31e90928eaf79cc1daea813">&#9670;&nbsp;</a></span>OtaPalSetPlatformImageState_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ota__platform__interface_8h.html#a503f74c089364b482321578b541d7640">OtaPalStatus_t</a>(* OtaPalSetPlatformImageState_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext, <a class="el" href="group__ota__enum__types.html#gad4909faa8b9c8672e7f7bef1bc6b5b84">OtaImageState_t</a> eState)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to set the state of the OTA update image. </p>
<p >Do whatever is required by the platform to Accept/Reject the OTA update image (or bundle). Refer to the PAL implementation to determine what happens on your platform.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>File context of type <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">eState</td><td>The desired state of the OTA update image.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The OtaPalStatus_t error code combined with the MCU specific error code. See <a class="el" href="ota_8h.html" title="OTA Agent Interface.">ota.h</a> for OTA major error codes and your specific PAL implementation for the sub error code.</dd></dl>
<p>Major error codes returned are:</p>
<p >OtaPalSuccess on success. OtaPalBadImageState: if you specify an invalid OtaImageState_t. No sub error code. OtaPalAbortFailed: failed to roll back the update image as requested by OtaImageStateAborted. OtaPalRejectFailed: failed to roll back the update image as requested by OtaImageStateRejected. OtaPalCommitFailed: failed to make the update image permanent as requested by OtaImageStateAccepted. </p>

</div>
</div>
<a id="a829011b74971ee47c38c5eabde519d84" name="a829011b74971ee47c38c5eabde519d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a829011b74971ee47c38c5eabde519d84">&#9670;&nbsp;</a></span>OtaPalGetPlatformImageState_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__ota__enum__types.html#gab1f386c3bcc707ff32033659a0a4ddca">OtaPalImageState_t</a>(* OtaPalGetPlatformImageState_t) (<a class="el" href="struct_ota_file_context__t.html">OtaFileContext_t</a> *const pFileContext)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the state of the OTA update image. </p>
<p >We read this at OTA_Init time and when the latest OTA job reports itself in self test. If the update image is in the "pending commit" state, we start a self test timer to assure that we can successfully connect to the OTA services and accept the OTA update image within a reasonable amount of time (user configurable). If we don't satisfy that requirement, we assume there is something wrong with the firmware and automatically reset the device, causing it to roll back to the previously known working code.</p>
<p >If the update image state is not in "pending commit," the self test timer is not started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pFileContext</td><td>File context of type <a class="el" href="struct_ota_file_context__t.html" title="OTA File Context Information.">OtaFileContext_t</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An OtaPalImageState_t. One of the following: OtaPalImageStatePendingCommit (the new firmware image is in the self test phase) OtaPalImageStateValid (the new firmware image is already committed) OtaPalImageStateInvalid (the new firmware image is invalid or non-existent)</dd></dl>
<p>NOTE: OtaPalImageStateUnknown should NEVER be returned and indicates an implementation error. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_8ee1a5e78eaec319fe5d64075812fc61.html">include</a></li><li class="navelem"><a class="el" href="ota__platform__interface_8h.html">ota_platform_interface.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
